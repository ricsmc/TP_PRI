extends layout

block content
    .w3-container 
        h2.w3-bottombar #{post.titulo}
        p #{post.descricao}
        for i in post.tags 
            a(href="/tags/" + i) # #{i}
        h3 Comentários
        .w3-container.w3-border
            form.w3-container.w3-margin(action='/posts/' + post._id method='POST')
                label Novo Comentário
                input.w3-input(type="text" name="comment")
                input.w3-btn-gray(type="submit" value="Submeter")
            if(post.comment.length > 0)
                for i in post.comment
                    .w3-container.w3-border-top
                        p.w3-small #{i.username}
                        - var data = Math.abs(Date.parse(i.data) - new Date())
                        if(data < 1000*60)
                            p.w3-tiny= "há uns segundos"
                        else if(data < 1000*60*60)
                            p.w3-tiny= 'há ' + parseInt(data/(1000*60),10) + ' minutos' 
                        else if(data<1000*60*60*24)
                          p.w3-tiny= 'há ' + parseInt(data / (1000*60*60),10) + ' horas' 
                        else if(data < 1000*60*60*24*31)
                          p.w3-tiny= 'há ' + parseInt(data / (1000*60*60*24),10) + ' dias' 
                        else if(data < 1000*60*60*24*365)
                          p.w3-tiny= 'há ' + parseInt(data / (1000*60*60*24*31),10) + ' meses' 
                        else 
                          p.w3-tiny= 'há ' + parseInt(data / (1000*60*60*24*365),10) + ' anos' 
                        p #{i.comment}
            else 
                p
                    b Não há comentários para mostrar


